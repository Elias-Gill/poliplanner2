<!DOCTYPE html>
<html lang="es" class="has-navbar-fixed-top">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Poliplanner</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/htmx.org@1.9.12"></script>
    <style>
      body { font-family: 'Urbanist', sans-serif; }
      html, body { min-height: 100vh; display: flex; flex-direction: column; }
      main { flex: 1; }
      * {
      transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
      }

      /* Navbar compacto */
      .navbar.is-fixed-top { padding: 0.35rem 0; min-height: 3rem; }
      .navbar-brand .navbar-item { padding: 0.5rem 1rem; font-size: 1.1rem; font-weight: 600; }
      .navbar-item { padding: 0.5rem 0.9rem; font-size: 0.95rem; }

      /* Footer pequeño */
      .footer { padding: 1.5rem; background: #fafafa; border-top: 1px solid #dbdbdb; font-size: 0.85rem; }
      .has-background-dark .footer { background: #1a1a1a; border-top-color: #333; }

      /* Botón tema */
      .theme-toggle-btn {
          position: fixed;
          bottom: 1.5rem;
          right: 1.5rem;
          z-index: 30;
          width: 42px;
          height: 42px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      }
      @media (max-width: 768px) {
          .theme-toggle-btn { bottom: 1rem; right: 1rem; width: 40px; height: 40px; }
      }
    </style>
    <link rel="icon" href="/favicon.ico" sizes="any">
    <script>
      if (localStorage.getItem('theme') === 'dark') {
          document.documentElement.classList.add('has-background-dark', 'has-text-light');
      }
    </script>
  </head>
  <body>
    <nav class="navbar is-fixed-top has-shadow">
      <div class="container">
        <div class="navbar-brand">
          <a class="navbar-item" href="/">
            <span class="icon mr-2"><i class="bi bi-calendar3"></i></span>
            <span>Poliplanner</span>
          </a>
          <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarMenu">
            <span></span><span></span><span></span>
          </a>
        </div>
        <div id="navbarMenu" class="navbar-menu">
          <div class="navbar-start">
            <a class="navbar-item" href="/horarios">Nuevo horario</a>
            <a class="navbar-item" href="/calculadora">Calculadora</a>
            <a class="navbar-item" href="/ayudas">Ayudas</a>
          </div>
        </div>
      </div>
    </nav>
    <main class="section pt-6">
      <div class="container">
        {{template "content" .}}
      </div>
    </main>
    <button id="theme-toggle" class="button is-primary is-inverted theme-toggle-btn" aria-label="Cambiar tema">
      <i class="bi bi-moon"></i>
    </button>
    <footer class="footer">
      <div class="container">
        <div class="content has-text-centered">
          <p>© 2025 Poliplanner — Hecho por <a href="https://github.com/elias-gill" target="_blank" rel="noopener">Elias Gill</a></p>
        </div>
      </div>
    </footer>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
          // Burger
          const burger = document.querySelector('.navbar-burger');
          const menu = document.getElementById('navbarMenu');
          burger.addEventListener('click', () => {
              burger.classList.toggle('is-active');
              menu.classList.toggle('is-active');
          });

          // Tema
          const btn = document.getElementById('theme-toggle');
          const isDark = document.documentElement.classList.contains('has-background-dark');
          btn.innerHTML = isDark ? '<i class="bi bi-sun"></i>' : '<i class="bi bi-moon"></i>';

          btn.addEventListener('click', () => {
              const dark = document.documentElement.classList.toggle('has-background-dark');
              document.documentElement.classList.toggle('has-text-light');
              localStorage.setItem('theme', dark ? 'dark' : 'light');
              btn.innerHTML = dark ? '<i class="bi bi-sun"></i>' : '<i class="bi bi-moon"></i>';
          });
      });
    </script>
  </body>
</html>
