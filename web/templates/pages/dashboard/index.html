{{ define "content" }}
<main>
  <div class="header-selector">
    <h1>Mis horarios</h1>
    {{ if .Schedules }}
    <div class="form-container">
      <form id="scheduleForm" action="/" method="get">
        <select id="scheduleSelector" name="id" onchange="this.form.submit()">
          <option value="" disabled {{ if not .SelectedScheduleID }}selected{{ end }}>
            Selecciona un horario
          </option>
          {{ range .Schedules }}
          <option value="{{ .ID }}" {{ if eq .ID $.SelectedScheduleID }}selected{{ end }}>
            {{ .Description }}
          </option>
          {{ end }}
        </select>
      </form>
      {{ if .SelectedScheduleID }}
      <form id="deleteScheduleForm"
            action="/schedule/{{ .SelectedScheduleID }}/delete"
            method="post"
            onsubmit="return confirm('Â¿EstÃ¡s seguro que quieres eliminar este horario?');"
            style="margin-left: 1rem;">
        <button type="submit" class="error" title="Eliminar horario">ðŸ—‘</button>
      </form>
      {{ end }}
    </div>
    {{ else }}
    <p>No tienes horarios registrados.</p>
    {{ end }}
    <button>
      <a href="/schedule/create" style="color: white; text-decoration: none;">Crear</a>
    </button>
  </div>
  {{ if .Error }}    
  <div class="alert alert-error" role="alert">{{ .Error }}</div>
  {{ end }}
  {{ if .Success }}  
  <div class="alert alert-success" role="alert">{{ .Success }}</div>
  {{ end }}
  {{ if .Warning }}  
  <div class="alert alert-warning" role="alert">{{ .Warning }}</div>
  {{ end }}
  {{ if .HasNewExcel }} 
  <div class="alert alert-warning" role="alert">{{ .HasNewExcel }}</div>
  {{ end }}
  <section>
    {{ if .SelectedScheduleID }}
    <a href="/dashboard/{{ .SelectedScheduleID }}/calendar" class="calendar-button" style="margin-left: 1rem;">
      ðŸ“… Calendario
    </a>
    <div id="schedule-detail"
         hx-get="/dashboard/{{ .SelectedScheduleID }}/details"
         hx-trigger="load">
    </div>
    {{ end }}
    <div id="bottom"></div>
  </section>
  <style>
    .header-selector{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-xl);padding:var(--space-md);flex-wrap:wrap}
    .form-container{display:flex;align-items:center;gap:var(--space-md)}
    #scheduleSelector{width:250px;padding:var(--space-sm);font-size:var(--font-size-base);border:1px
        solid var(--color-border);border-radius:.25rem} .calendar-button{padding:.4rem
        .6rem;border-radius:.3rem;text-decoration:none;border:1px solid
            var(--color-border);color:inherit}
    .error{background:#dc3545;color:#fff;border:none;padding:.3rem
        .6rem;border-radius:.25rem;cursor:pointer;font-size:1.1rem;line-height:1}
    @media(max-width:768px){
        .header-selector{flex-direction:column;align-items:flex-start;gap:var(--space-md)}
        .form-container{width:100%;gap:var(--space-sm)} #scheduleSelector{width:100%} }
  </style>
</main>
{{ end }}
